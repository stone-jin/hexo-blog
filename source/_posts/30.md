---
title: （三）Spring Boot Admin微服务监控中心之状态变更报警
cover: https://img.zcool.cn/community/011e475b86a540a80120245c336724.jpg@1280w_1l_2o_100sh.jpg
subtitle: Spring Boot Admin微服务监控中心之状态变更报警
date: 2018-04-30 21:40:28
author: 
  nick: 金炳
  link: https://www.github.com/stone-jin
categories:
- Spring Cloud
tags:
- JAVA
- Spring Cloud
---

## 一、介绍
前面两篇文章，我们一篇讲述了如何搭建一个Spring Boot Admin，一篇介绍了如何使用Spring Boot Admin client和actuator注册到Spring Boot Admin Server上来。那么我们下面的需求就是如何服务节点当服务上下线的时候，收到邮件呢？

## 二、技术点
这个需求，我们使用spring-boot-starter-mail来解决我们的需求。首先我们在pom包中引入我们的包。
```text
<dependency>
   <groupId>org.springframework.boot</groupId>
   <artifactId>spring-boot-starter-mail</artifactId>
</dependency>
```
然后引入pom包之后，reimport一下，然后我们再去修改我们的配置文件application.yml，此处我们以163的邮箱为例：
```text
spring.mail.host=smtp.163.com
spring.mail.username=****
spring.mail.password=****
spring.boot.admin.notify.mail.from=hzjinbing@163.com
spring.boot.admin.notify.mail.to=m17606530974@163.com
```

然后我们测试下我们刚刚文章二服务的上下线看看效果。

最终效果：

![](https://520stone-blog.oss-cn-beijing.aliyuncs.com/upload/2018-04-30T13:29:45Z/947fcb19-1b11-43c2-9fd7-855caf160d23.png)

然后，我们的报警功能，就算完成了。这个过程中，推荐使用网易的邮箱大师来进行邮件的分类。（这个邮箱大师，支持gmail，163，qq邮箱等，所以我很推荐各位使用，当然这个不仅可以用在此处，接口级别的报警也可以类似方法）

安装邮箱大师的网址：http://mail.163.com/dashi/

然后打开邮箱大师，然后打开左侧的设置界面：然后配置来信分类功能

![](https://520stone-blog.oss-cn-beijing.aliyuncs.com/upload/2018-04-30T13:37:47Z/9af98641-b15b-4d17-bf33-8f9e9248bd61.png)

然后配置的条件如下，当标题中有is OFFLINE就移动到报警中心的文件夹下面：

![](https://520stone-blog.oss-cn-beijing.aliyuncs.com/upload/2018-04-30T13:38:49Z/edac29b3-6e85-450c-adb3-37a96194836e.png)

这样服务下线，我们一点这个邮箱下面这个报警中心，就能看到我们所有的服务下线的记录了。

很开心介绍给大家我参与开发的这个软件，邮箱大师的开发，我作为hybird app模式，我是其中的前端，windows版本的日历，读写信，设置等均为前端开发，mac版本前端也是复用的。因为很好用，所以推荐给各位使用。

演示代码：![](https://github.com/stone-jin/spring-boot-admin-server2)

三、后续介绍
后面我看看是否再出一篇文章，比如如何进行Spring Boot Admin的集群。